# 测试过程中使用的 yaml 文件，作为参考保留

# global:
#   annotations:
#     anno-global: global-annotations
#     anno-value: global-annotations-11
#   labels:
#     globalLabels: global-labels
#   helmLabels: false

# annotations:
#   anno-value: values-annotations
# labels:
#   valuesLabel: values-labels
# helmLabels: false
# # fullname: value-Name
# # selector:
# #   matchExpressions:
# #     - environment3 == production4
# terminationGracePeriodSeconds: 99
replicas: 33

# zz:
# fieldPaths:
#   - path.to.key
#   - path1.to.key

# imageFileRefs:
#   - filePath: _configs/env.yaml
#     fieldPaths:
#       - image.bbb

Deployment:
  # service 应该是个 map
  # 如果需要创建多个 service 应该定义多个
  service:
    name: svc-deploy-111
    type: ClusterIP
    # [hostIP:][hostPort:]containerPort[/protocol][#name]
    # [nodePort:]port[:targetPort][/protocol][@appProtocol][#name]
    ports:
      - 80:8080/tcp#svc-port-name-1
      - 443
    sessionAffinityConfig: 86400
    sessionAffinity: ClientIP

  # annotations:
  #   aaa: ssss
  #   bbb: 123
  # # 专用变量定义。输出只支显示
  # #   helm.sh/chart
  # #   app.kubernetes.io/version
  # #   app.kubernetes.io/managed-by
  # #   helm.sh/chart
  # helmLabels: false
  # name: ctx-name
  # fullname: ctx-fullname
  # namespace: ctx-namespace
  # labels:
  #   ctxLabels: ctx-labels
  # # selector:
  # #   matchExpressions:
  # #     # 基于等值 / 不等值
  # #     - environment = production
  # #     - environment1 == production1
  # #     - tier != frontend
  # #     # 基于集合
  # #     - environment2 in (production2, qa2, xxx)
  # #     - tier2 notin (frontend2, backend2)
  # #     - partition
  # #     - "!partition1"
  # #     # 原生
  # #     - key: key
  # #       operator: In  # In/NotIn/Exists/DoesNotExist
  # #       values:
  # #       - value1
  # #       - value2
  # #     - key: key2
  # #       operator: Exists  # In/NotIn/Exists/DoesNotExist
  # #   matchLabels:
  # #     xxx: deploy-1
  # minReadySeconds: 11
  # progressDeadlineSeconds: 33
  # # <Recreate> | <RollingUpdate> [maxSurge(25%)][maxUnavailable(25%)]
  # # strategy: Recreate
  # strategy: RollingUpdate 1 1
  # activeDeadlineSeconds: 10
  # automountServiceAccountToken: true
  # dnsPolicy: ClusterFirstWithHostNet
  # hostNetwork: true
  # hostPID: true
  # shareProcessNamespace: false
  # hostUsers: false
  # hostname: aaa-hostname
  # hostnameOverride: aa
  # terminationGracePeriodSeconds: 10
  # subdomain: sub-domain
  # serviceAccountName: svc-acc-name
  # schedulerName: xxx
  # restartPolicy: Always
  # priorityClassName: system-node-critical
  # priority: 111
  # preemptionPolicy: preemptionPolicy
  # nodeSelector:
  #   beta.kubernetes.io/arch: amd64
  # nodeName: vm-208
  # hostAliases:
  #   - 1.1.1.1 1.example.com 1-1.example.com
  #   - 2.2.2.2 2.example.com
  # imagePullSecrets:
  #   - image-pull-secret-1
  #   - image-pull-secret-2
  # # nodeAffinity:
  # #   preferred:
  # #     - weight: 1
  # #       matchExpressions:
  # #         - c != d
  # #       matchFields:
  # #         - aa in (xx1, xx2, 123333)
  # #   required:
  # #     - matchExpressions:
  # #         - a = b
  # #     - matchFields:
  # #         - key: fields
  # #           operator: NotIn
  # #           values:
  # #           - value1
  # #           - value2
  # # podAffinity:
  # #   preferred:
  # #     - weight: 11
  # #       topologyKey: topologyKey-preferred
  # #       namespaceSelector:
  # #         matchExpressions:
  # #           - "!partition1"
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       labelSelector:
  # #         matchExpressions:
  # #           - "!partition2"
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       matchLabelKeys: []
  # #       namespaces:
  # #         - aaa bbb
  # #         - c
  # #   required:
  # #     - topologyKey: topologyKey-required
  # #       namespaceSelector:
  # #         matchExpressions:
  # #           - "!partition1"
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       labelSelector:
  # #         matchExpressions:
  # #           - "partition2"
  # #           - ssss != aaa
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       matchLabelKeys: []
  # #       namespaces:
  # #         - aaa bbb
  # #         - c
  # # podAntiAffinity:
  # #   preferred:
  # #     - weight: 22
  # #       topologyKey: topologyKey-preferred
  # #       namespaceSelector:
  # #         matchExpressions:
  # #           - partition1
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       labelSelector:
  # #         matchExpressions:
  # #           - aaa = cxxx
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       matchLabelKeys:
  # #       - labels1 labels2
  # #   required:
  # #     - topologyKey: topologyKey-required
  # #       namespaceSelector:
  # #         matchExpressions:
  # #           - "!partition1"
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       labelSelector:
  # #         matchExpressions:
  # #           - "partition2"
  # #           - ssss != aaa
  # #         matchLabels:
  # #           matchLabels-pod-affinity: zzz
  # #       matchLabelKeys: []
  # #       namespaces:
  # #         - aaa bbb
  # #         - c
  # # 通常它是一个返回 true / false 的 api
  # readinessGates:
  #   - www.example.com/feature-1
  #   - www.example.com/feature-2
  # resources:
  #   limits: 50m 512Mi 2Mi 40Mi
  #   requests:
  #     cpu: 0.5
  #     memory: 1Gi
  # schedulingGates:
  #   - "aaaaa"
  #   - bbbb
  # os: linux
  # # 原生 map 格式
  # securityContext:
  #   appArmorProfile:
  #     localhostProfile: string
  #     type: string
  #   fsGroup: "0"  # 显示指定 0 时需要加引号
  #   fsGroupChangePolicy: string
  #   runAsGroup: "0"
  #   runAsNonRoot: true
  #   runAsUser: 1
  #   seLinuxChangePolicy: string
  #   seLinuxOptions:
  #     level: string
  #     role: string
  #     type: string
  #     user: string
  #   seccompProfile:
  #     localhostProfile: string
  #     type: string
  #   supplementalGroups:
  #     - 0
  #     - 1
  #   supplementalGroupsPolicy: string
  #   sysctls:
  #     - name: string
  #       value: string
  #     - name: string
  #       value: string
  #   windowsOptions:
  #     gmsaCredentialSpec: string
  #     gmsaCredentialSpecName: string
  #     hostProcess: true
  #     runAsUserName: string
  # tolerations:
  #   - effect: NoExecute
  #     key: string
  #     operator: Equal
  #     tolerationSeconds: "0"  # 显示指定 0 时需要加引号
  #     value: string
  # topologySpreadConstraints:
  #   - labelSelector:
  #       matchExpressions:
  #         - "!partition1"
  #       matchLabels:
  #         matchLabels11: xxx
  #     matchLabelKeys:
  #       - string array
  #     maxSkew: "0"  # 显示指定 0 时需要加引号
  #     minDomains: 11
  #     nodeAffinityPolicy: string
  #     nodeTaintsPolicy: string
  #     topologyKey: string
  #     whenUnsatisfiable: ScheduleAnyway
  # volumes:
  #   # volumeType volumeName name [optional] [defaultMode] [items (key path [mode], key path [mode])]
  #   - cm vol-cm aaa true items (key path, key1 path1)
  #   # volumeType volumeName [medium] [sizeLimit]
  #   - emptyDir vol-a
  #   - emptyDir vol-b 500Mi
  #   # volumeType volumeName targetWWNs (wwn1, wwn2) lun fsType [readOnly]
  #   # volumeType volumeName wwids (wid1, wid2) fsType [readOnly]
  #   - fc vol-fc1 targetWWNs (wwn1, wwn2) 0 ext4 true
  #   - fc vol-fc2 wwids (wid1, wid2) ext4 true
  #   # volumeType volumeName reference [pullPolicy]
  #   - image vol-ssss x.x.xom/path/aa:v2 Never
  #   # volumeType volumeName path [type]
  #   - hostPath vol-ccc /config/xxx/ Directory
  #   # volumeType volumeName targetPortal iqn lun fsType [readOnly] [iscsiInterface] [initiatorName] [chap (chapAuthDiscovery, chapAuthSession)] [portals (ip, ip)] [secretRef]
  #   - iscsi vol-eee targetPortal iqn 0 ext4 true iscsiInterface initiatorName chap(true, true) portals (10.10.2.22, 2.2.2.2) secret-ref
  #   # volumeType volumeName server path [readOnly]
  #   - nfs vol-nfs x.xom /config/xx true
  #   # volumeType volumeName claimName [readOnly]
  #   - pvc vol-ggg claimName true
  #   # volumeType volumeName secretName [optional] [defaultMode] [items (key path [mode], key path [mode])]
  #   - secret vol-hhh secretName true 0755 items(key path 0650, key1 path1)
  #   # volumeType volumeName
  #   - local vol-local /config/aaa
  containers:
    - name: c-1
      # args:
      # - -c
      # - sleep 3600; echo "done"
      # command:
      # - /bin/bash
      # imagePullPolicy: IfNotPresent
      # # restart <in|notin> (codeNumber, ...)
      # restartPolicyRules:
      #   - restart in (1, 2)
      #   - restart notin (22,3, 6)
      # restartPolicy: Always
      # stdin: true
      # stdinOnce: true
      # terminationMessagePath: /dev/termination-log
      # terminationMessagePolicy: File
      # tty: true
      # workingDir: /root
      # # name mountPath [subPath] [subPathExpr] [readOnly] [recursiveReadOnly] [mountPropagation]
      # volumeMounts:
      #   - vol-name /mnt/vol-name config/xx true
      #   - vol-name1 /mnt/vol-name1 config/xx1 false
      # # name devicePath
      # volumeDevices:
      #   - name /path/to/devicePath
      # # [cpu] [memory] [hugepages-size hugepages-max]
      # # 原生 map
      # resourcesFileRefs:
      #   - filePath: _configs/cm.yaml
      #   - filePath: _configs/env.yaml
      #     fieldPaths:
      #       - resources
      resources:
        limits: 1 1Gi
        requests:
          cpu: 0.5
          memory: 1Gi
      # # resourceName [restartPolicy]
      # resizePolicy:
      #   - cpu
      #   - memory RestartContainer
      # # [hostIP:][hostPort:]containerPort[/protocol][#name]
      # ports:
      #   - 8080
      #   - 8001:8081
      #   - 8002:8082/udp
      #   - 8002:8082#name-ports1
      #   - 1.1.1.2:8003:8083
      #   - 192.168.1.1:9090:8080/tcp#api
      #   - 8989/udp#xxx
      # # - name: xxx
      # #   value: xxx
      # # - name: xxx
      # #   valueFrom: configMap name key [optional]
      # #   valueFrom: field fieldPath [apiVersion]
      # #   valueFrom: file volumeName path key [optional]
      # #   valueFrom: resource resource [containerName] [divisor]
      # # 从文件中的指定路径取值合并到 env
      # # 文件内容的正确性需用户自行保障
      # # fieldPaths 为空时使用整个文件内容
      # envFileRefs:
      #   - filePath: _configs/env.yaml
      #     fieldPaths:
      #       - path.to.key
      #       - path1.to.key
      #   - filePath: _configs/cm.yaml
      # # #   valueFrom: secret name key [optional]
      # env:
      #   - name: env-name
      #     value: env-value
      #   # - name: env-name2
      #   #   valueFrom: configMap cm-name cm-key false
      #   # - name: env-name3
      #   #   valueFrom: field path/to/field v1beta1
      #   # - name: env-name4
      #   #   valueFrom: file vol-name config/xx key-conf.d false
      #   # - name: env-name5
      #   #   valueFrom: resource limits.memory containerName 0.5
      #   # - name: env-name6
      #   #   valueFrom: secret sec-name sec-key
      # envFromFileRefs:
      #   - filePath: _configs/env.yaml
      #     fieldPaths:
      #       - envFromPath
      #   - filePath: _configs/cm.yaml
      # # 支持：字符串格式和原生 map 格式
      # # sourceType sourceName [prefix] [optional]
      # envFrom:
      #   # - configMap cm_name CM_ true
      #   # - secret sec_name SEC_ true
      #   - configMapRef:
      #       name: cm-name11
      #       optional: true
      #     prefix: cm_prefix_
      # imageFileRefs:
      #   - filePath: _configs/cm.yaml
      #   - filePath: _configs/env.yaml
      #     fieldPaths:
      #       - image.aa
      #       - imageRef
      # [registry]/[namespace]/[repository]:[tag]@[digest]
      image: image-aaa:latest
      # imageRef:
      #   # 这一般是一个域名（可以带上端口号，如 example.com:443 ）默认值 docker.io
      #   registry:
      #   # 格式 a/b/c 或 a 默认值 library
      #   namespace:
      #   # 【必填】镜像名
      #   repository: xx
      #   # 镜像标签 默认值 latest
      #   tag:
      #   # 镜像摘要
      #   digest:
  #     lifecycle:
  #       postStart:
  #         exec:
  #           - xxx
  #           - xxx
  #         # [scheme] [host] [port] path <<header>> (name value, ...)
  #         httpGet: http 1.1.1.1 7777 /api/health header (xxx aa/bb, yyy ccc/dd)
  #         sleep: 30
  #         tcpSocket: 1.1.1.1 8888
  #       preStop:
  #         exec:
  #           - xxx
  #           - xxx
  #         httpGet: http 2.2.2.2 /api/health header (xxx aa/bb, yyy ccc/dd)
  #         sleep: 30
  #         tcpSocket: 2.2.2.2 8888
  #       stopSignal: SIGKILL
  #     # # 三种 probe 共用相同的配置 livenessProbe readinessProbe startupProbe
  #     livenessProbe:
  #       exec:
  #         - xxx
  #         - xxx
  #       httpGet: http 2.2.2.2 7777 /api/health header (xxx aa/bb, yyy ccc/dd)
  #       sleep: 30
  #       tcpSocket: 2.2.2.2 8888
  #       grpc: svc-name 9999
  #       failureThreshold: 14
  #       initialDelaySeconds: 13
  #       periodSeconds: 12
  #       successThreshold: 11
  #       terminationGracePeriodSeconds: 111
  #       timeoutSeconds: 11
  #     # # 原生 map 格式
  #     securityContext:
  #       allowPrivilegeEscalation: true
  #       appArmorProfile:
  #         localhostProfile: string
  #         type: string
  #       capabilities:
  #         add:
  #           - aa
  #         drop:
  #           - bb
  #       privileged: true
  #       procMount: Unmasked
  #       readOnlyRootFilesystem: true
  #       runAsGroup: "0"
  #       runAsNonRoot: true
  #       runAsUser: "0"
  #       seLinuxOptions:
  #         level: string
  #         role: string
  #         type: string
  #         user: string
  #       seccompProfile:
  #         localhostProfile: string
  #         type: string
  #       windowsOptions:
  #         gmsaCredentialSpec: string
  #         gmsaCredentialSpecName: string
  #         hostProcess: true
  #         runAsUserName: string
  # initContainers:
  #   - name: c-1
  #     image: init:latest

StatefulSet:
  minReadySeconds: 10
  ordinals: 11
  persistentVolumeClaimRetentionPolicy: delete retain
  podManagementPolicy: OrderedReady
  replicas: 0
  revisionHistoryLimit: 22
  serviceName: xxx
  # [OnDelete|RollingUpdate] [maxUnavailable(1)] [partition(0)]
  updateStrategy: 10% 0
  # <storageClassName> <name> [namespace] accessMode|accessModes (accessModes, ...) <requests> [limits] [volumeName] [volumeMode]
  # 原生格式（有限字段支持）
  volumeClaimTemplates:
    - sc-name claim-name default11 accessMode (ReadWriteOnce) 10Gi 20Gi pvc-aaa-bbb-ccc Filesystem
    - name: string
      namespace: string
      accessModes:
        - ReadWriteOnce
      # requests limits
      resources:
        requests:
          storage: 10Gi
        limits:
          storage: 20Gi
      storageClassName: string
      volumeMode: string
      volumeName: string
  hostAliases:
    - 1.1.1.1 xxx.com
  containers:
    - name: sts-c1
      image: xxx

DaemonSet:
  name: ds-xxx
  # type maxSurge maxUnavailable
  updateStrategy: RollingUpdate 10% 11
  containers:
    - name: ds-name
      image: xxxx

CronJob:
  concurrencyPolicy: Allow
  failedJobsHistoryLimit: 1
  schedule: "*/10 00 3 12 3"
  startingDeadlineSeconds: 1
  successfulJobsHistoryLimit: 22
  suspend: true
  timeZone: Asia/Shanghai
  labels:
    aaa: xxxxx
  jobTemplate:
    activeDeadlineSeconds: 11
    ttlSecondsAfterFinished: "0"
    # 格式 succeededCount succeededIndexes
    # 原生 map
    successPolicy:
      - 2 1, 3-5, 7
      - 1 1-3, 5, 7
      - 3
      - succeededCount: 1
        succeededIndexes: 2, 3
    # onExitCodes format: <action> [containerName] <in|notin> (values, ...)
    # onPodConditions format: Ignore (DisruptionTarget True, IgnoreXXX)
    podFailurePolicy:
      - FailJob cn-name in (1, 2)
      - Ignore (DisruptionTarget True, IgnoreXXX)
    selector:
      matchExpressions:
        - aaa in (a, b)
      matchLabels:
        lll: aaaa
    template:
      activeDeadlineSeconds: 111
      containers:
        - name: xxxx
          image: xxxxxx:v11
          command:
            - /bin/sh
            - -c
            - sleep 5

Ingress:
  # resource name kind [apiGroup]
  # service name port.name|port.number
  # resource 和 service 是介定词，属于固定词缀
  # defaultBackend: resource name-xxx core v1
  ingressClassName: ingress-class-name
  rules:
    1.e.com:
      # # path [pathType] resource name kind [apiGroup]
      # # path [pathType] service name port.name|port.number
      # # resource 和 service 是介定词，属于固定词缀
      - /api/health1 service svc-name 8080
      - /api/health2 Prefix service svc-name 9999
      - /api/health3 resource name-xxx core v1
    # - host: 1.e.com
    #   # path [pathType] resource name kind [apiGroup]
    #   # path [pathType] service name port.name|port.number
    #   # resource 和 service 是介定词，属于固定词缀
    #   paths:
    #     - /api/health1 service svc-name 8080
    #     - /api/health2 Prefix service svc-name 9999
    #     - /api/health3 resource name-xxx core v1
  # secretName hosts
  tls:
    - secret-name 1.e.com *.e.com

IngressClass:
  controller: string
  parameters:
    apiGroup: string
    kind: string
    name: string
    namespace: string
    scope: string

ConfigMap:
  immutable: true
  # 读取内容后与 binaryData 合并
  # 优先级 binaryData > binaryDataFileRefs
  binaryDataFileRefs:
    - filePath: _configs/tls.crt
      key: aaa
    - filePath: _configs/env.yaml
  binaryData:
    key1: v1
    key4: 123
    app.properties: |
      server.port=8080
      database.url=jdbc:mysql://localhost:3306/mydb
      environment=development
  # 读取内容后与 data 合并
  # 优先级 data > dataFilesRef
  dataFileRefs:
    - filePath: _configs/cm.yaml
  data:
    key2: v2
    key3: v2
  helmLabels: false

Secret:
  immutable: true
  name: secret-name
  annotations:
    xxxx.com/aaa: 1123
    kubernetes.io/service-account-name: xxxx
  type: Opaque
  # 读取内容后与 data 合并
  # 优先级 data > dataFileRefs
  dataFileRefs:
    - filePath: _configs/cm.yaml
    - filePath: _configs/tls.crt
      key: tls.crt
  data:
    # # kubernetes.io/service-account-token
    # serviceAccount: sa-token
    # namespace: "default"
    # # kubernetes.io/dockercfg kubernetes.io/dockerconfigjson
    # server: registry.docker.com:5000
    # username: admin
    # password: admin
    # email:
    # # kubernetes.io/basic-auth
    # username: admin
    # password: admin
    # # kubernetes.io/ssh-auth
    # ssh-privatekey: 私钥
    # # kubernetes.io/tls
    # tls.crt: xxx
    # tls.key: xxx
    # # bootstrap.kubernetes.io/token
    # token-id: a12345
    # token-secret: a123123123123123123123sdgasgasgafasdfasdf
    # description: "xxx"
    # expiration: 2025-12-31T00:00:00Z
    # auth-extra-groups: admin
    # usage-bootstrap-authentication: admin
    # usage-bootstrap-signing: admin
  # 读取内容后与 stringData 合并
  # 优先级 stringData > stringDataFileRefs
  stringDataFileRefs:
    - filePath: _configs/cm.yaml
    - filePath: _configs/tls.crt
      key: tls.crt
  stringData:
    xxx: xxx

StorageClass:
  allowVolumeExpansion: true
  allowedTopologies:
    - topology.kubernetes.io/zone:
        - us-central-1a
        - us-central-1b
    - topology.kubernetes.io/zone:
        - us-central-1a
        - us-central-1b
  mountOptions:
    - discard
  parameters:
    server: nfs-server.example.com
    path: /share
    readOnly: "false"
  provisioner: example.com/external-nfs
  reclaimPolicy: Retain
  volumeBindingMode: Immediate

PodTemplate:
  name: hhhh
  namespace: xxxx
  activeDeadlineSeconds: 11
  containers:
    - name: xxxx
      image: xxxxxx:v11

Binding:
  target:
    apiVersion: string
    fieldPath: string
    kind: string
    name: string
    namespace: string
    resourceVersion: string
    uid: string

ClusterRole:
  aggregationRule:
    clusterRoleSelectors:
      - matchExpressions:
          # 基于等值 / 不等值
          - environment = production
          - environment1 == production1
          - tier != frontend
          # 基于集合
          - environment2 in (production2, qa2, xxx)
          - tier2 notin (frontend2, backend2)
          - partition
          - "!partition1"
          # 原生
          - key: key
            operator: In # In/NotIn/Exists/DoesNotExist
            values:
              - value1
              - value2
          - key: key2
            operator: Exists # In/NotIn/Exists/DoesNotExist
        matchLabels:
          xxx: a1231221
  rules:
    - apiGroups: ["*"]
      resources: ["certificates"]
      verbs: ["get", "list", "watch"]
    - apiGroups: [""]
      resources: ["secrets"]
      verbs: ["get", "list", "watch"]

ClusterRoleBinding:
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: cert-manager-controller-issuers
  subjects:
    - name: cert-manager
      namespace: cert-manager
      kind: ServiceAccount

Namespace:
  name: xxx
  namespace: yyy

PersistentVolume:
  claimRef:
    apiVersion: string
    fieldPath: string
    kind: string
    name: string
    namespace: string
    resourceVersion: string
    uid: string
  csi:
    controllerExpandSecretRef:
      name: string
      namespace: ns-aaa
    controllerPublishSecretRef:
      name: string
      namespace: string
    driver: string
    fsType: ext4
    nodeExpandSecretRef:
      name: string
      namespace: string
    nodePublishSecretRef:
      name: string
      namespace: string
    nodeStageSecretRef:
      name: string
      namespace: string
    readOnly: true
    volumeAttributes:
      x: xxx
    volumeHandle: string
  fc:
    fsType: ext4
    lun: 0
    readOnly: true
    targetWWNs:
      - wwn1
    wwids:
      - wwids1
  hostPath:
    path: /config/aaa
    type: DirectoryOrCreate
  iscsi:
    chapAuthDiscovery: true
    chapAuthSession: true
    fsType: ext4
    initiatorName: string
    iqn: string
    iscsiInterface: string
    lun: 0
    portals:
      - xx1
      - xx2
    readOnly: true
    secretRef:
      name: string
      namespace: string
    targetPortal: 1.1.1.1:11111
  local:
    fsType: ext4
    path: /aaa
  nfs:
    path: /volume/nfs/data
    readOnly: true
    server: x.x.x.com
  nodeAffinity:
    required:
      nodeSelectorTerms:
        - matchExpressions:
            - key: a
              operator: In
              values:
                - xxx1
                - xxx2
        - matchFields:
            - key: b
              operator: DoesNotExist
              values:
                - zzz1
                - zzz2

Role:
  rules:
    - apiGroups: ["coordination.k8s.io"]
      resources: ["leases"]
      verbs: ["create"]
    - apiGroups: ["*"]
      resources: ["leases"]
      verbs: ["create"]

RoleBinding:
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: cert-manager-cainjector:leaderelection
  subjects:
    - kind: ServiceAccount
      name: cert-manager-cainjector
      namespace: cert-manager

ServiceAccount:
  automountServiceAccountToken: true
  imagePullSecrets:
    - xxx
  secrets:
    - apiVersion: string
      fieldPath: string
      kind: string
      name: string
      namespace: string
      resourceVersion: string
      uid: string

NetworkPolicy:
  egress:
    - ports:
        - endPort: 12345
          port: 34456
          protocol: tcp
      to:
        - endPort: 12345
          port: port-aaa
          protocol: tcp
  ingress:
    - from:
        - ipBlock:
            cidr: 192.168.1.0/24
            except:
              - 192.168.2.0/24
          namespaceSelector:
            matchExpressions:
              - key: a
                operator: In
                values:
                  - xxx1
                  - xxx2
            matchLabels:
              x: yyy
          podSelector:
            matchExpressions:
              - key: a
                operator: In
                values:
                  - xxx1
                  - xxx2
            matchLabels:
              x: yyy
      ports:
        - endPort: 12345
          port: port-aaa
          protocol: tcp
  podSelector:
    matchExpressions:
      - key: a
        operator: In
        values:
          - xxx1
          - xxx2
    matchLabels:
      x: yyy
  policyTypes:
    - Ingress
    - Egress

Service:
  name: svc-xxx
  type: NodePort
  # [hostIP:][hostPort:]containerPort[/protocol][#name]
  # [nodePort:]port[:targetPort][/protocol][@appProtocol][#name]
  ports:
    - 32767:80:8080/tcp#svc-port-name-1
    - 443#svc-port-name-2
  sessionAffinityConfig: 86400
  sessionAffinity: ClientIP
  allocateLoadBalancerNodePorts: false

Kustomization:
  buildMetadata:
    - managedByLabel
    - originAnnotations
    - transformerAnnotations
  commonAnnotations:
    oncallPager: 800-555-1212
  commonLabels:
    someName: someValue
    owner: alice
    app: bingo
  components:
    - ../../aaa/bbb
    - ../../aaa/bbb/ccc
  configMapGenerator:
    - name: my-java-server-props
      namespace: ns-111
      behavior: merge
      files:
        - application.properties
        - more.properties
    - name: my-java-server-env-file-vars
      namespace: ns-222
      envs:
        - my-server-env.properties
        - more-server-props.env
    - name: my-java-server-env-vars
      namespace: ns-333
      literals:
        - JAVA_HOME=/opt/java/jdk
        - JAVA_TOOL_OPTIONS=-agentlib:hprof
      options:
        disableNameSuffixHash: true
        labels:
          pet: dog
    - name: dashboards
      namespace: ns-444
      files:
        - mydashboard.json
      options:
        annotations:
          dashboard: "1"
        labels:
          app.kubernetes.io/name: "app1"
  crds:
    - crds/typeA.yaml
    - crds/typeB.yaml
  generatorOptions:
    # labels to add to all generated resources
    labels:
      kustomize.generated.resources: somevalue
    # annotations to add to all generated resources
    annotations:
      kustomize.generated.resource: somevalue
    # disableNameSuffixHash is true disables the default behavior of adding a
    # suffix to the names of generated resources that is a hash of
    # the resource contents.
    disableNameSuffixHash: true
    # if set to true, the immutable property is added to generated resources
    immutable: true
  helmCharts:
    - name: minecraft
      repo: https://kubernetes-charts.storage.googleapis.com
      version: v1.2.0
      releaseName: test
      namespace: testNamespace
      valuesFile: values.yaml
      additionalValuesFiles:
        - values-file-1.yml
        - values-file-2.yml
  helmGlobals:
    chartHome: my-charts-dir
    configHome: my-config-dir
  images:
    - name: postgres
      newName: my-registry/my-postgres
      newTag: v1
    - name: nginx
      newTag: "1.8.0"
    - name: my-demo-app
      newName: my-app
    - name: alpine
      digest: sha256:24a0c4b4a4c0eb97a1aabb8e29f18e917d05abfe1b7a7c07857230879ce7d3d3
  labels:
    - pairs:
        someName: someValue
        owner: alice
        app: bingo
      includeSelectors: true # <-- false by default
      includeTemplates: true # <-- false by default
  namePrefix: aaa-
  namespace: ns-xxx
  nameSuffix: -bbb
  openapi:
    path: my_schema.json
    version: v1.20.4
  patches:
    - path: patch.yaml
      target:
        group: apps
        version: v1
        kind: Deployment
        name: deploy.*
        labelSelector: "env=dev"
        annotationSelector: "zone=west"
    - patch: |-
        - op: replace
          path: /some/existing/path
          value: new value
      target:
        kind: MyKind
        labelSelector: "env=dev"
      options:
        allowNameChange: true
        allowKindChange: true
    - patch: |-
        apiVersion: apps/v1
        kind: Deployment
        metadata:
          name: not-used
        spec:
          template:
            spec:
              containers:
                - name: nginx
                  image: nginx:1.21.0
  replacements:
    - source:
        group: string
        version: string
        kind: string
        name: string
        namespace: string
        fieldPath: string
        options:
          delimiter: string
          index: 1
          create: false
      sourceValue: string
      targets:
        - select:
            group: string
            version: string
            kind: string
            name: string
            namespace: string
            annotationSelector: string
            labelSelector: string
          reject:
            - group: string
              version: string
              kind: string
              name: string
              namespace: string
              annotationSelector: string
              labelSelector: string
          fieldPaths:
            - string
          options:
            delimiter: string
            index: 0
            create: true
  replicas:
    - name: deployment-name
      count: 5
    - name: deployment-name11
      count: 10
  resources:
    # Local files
    - myNamespace.yaml
    - deployment.yaml
    - sub-dir/some-deployment.yaml

    # Local directories
    - ../../commonbase

    # Remote URLs
    - https://github.com/kubernetes-sigs/kustomize//examples/multibases/?timeout=120&ref=v3.3.1

    # Legacy hashicorp/go-getter format
    - github.com/kubernets-sigs/kustomize/examples/helloWorld?ref=test-branch
  secretGenerator:
    - name: app-tls
      files:
        - secret/tls.crt
        - secret/tls.key
      type: "kubernetes.io/tls"
    - name: app-tls-namespaced
      # you can define a namespace to generate
      # a secret in, defaults to: "default"
      namespace: apps
      files:
        - tls.crt=catsecret/tls.crt
        - tls.key=secret/tls.key
      type: "kubernetes.io/tls"
    - name: env-file-secret
      envs:
        - env.txt
      type: Opaque
    - name: secret-with-annotation
      files:
        - app-config.yaml
      type: Opaque
      options:
        annotations:
          app_config: "true"
        labels:
          app.kubernetes.io/name: "app2"
  sortOptions:
    order: legacy
    legacySortOptions:
      orderFirst:
        - Namespace
        - ResourceQuota
        - StorageClass
        - CustomResourceDefinition
        - ServiceAccount
        - PodSecurityPolicy
        - Role
        - ClusterRole
        - RoleBinding
        - ClusterRoleBinding
        - ConfigMap
        - Secret
        - Endpoints
        - Service
        - LimitRange
        - PriorityClass
        - PersistentVolume
        - PersistentVolumeClaim
        - Deployment
        - StatefulSet
        - CronJob
        - PodDisruptionBudget
      orderLast:
        - MutatingWebhookConfiguration
        - ValidatingWebhookConfiguration

MetalLB:
  IPAddressPool:
    name: pool-a1
    namespace: metallb-system
    address:
      - 10.10.10.1/32
  L2Advertisement:
    name: default
    namespace: metallb-system
    ipAddressPools:
      - pool-a1

GCP:
  BackendConfig:
    timeoutSec: 40
    connectionDraining:
      drainingTimeoutSec: 60
    healthCheck:
      checkIntervalSec: 15
      timeoutSec: 15
      healthyThreshold: 1
      unhealthyThreshold: 2
      type: HTTP
      requestPath: /account/health/
      port: 9191
    logging:
      enable: true
      sampleRate: 0.5
  ManagedCertificate:
    domains:
      - "*.example.com"
      - 2.example.com

TkeServiceConfig:
  l4Listeners: # 四层规则配置，适用于Service的监听器配置。
    - protocol: TCP # 协议端口锚定Service的四层规则。必填，枚举值：TCP|UDP|TCP_SSL|QUIC。
      port: 80 # 必填，可选值：1~65535。
      deregisterTargetRst: true # 选填，布尔值。双向 RST 开关，建议非直连类型 Service 启用，非直连 Service 的连接会经过 NodePort 中转，不启用双向 RST 可能导致下线集群节点后造成业务中断。
      session: # 会话保持相关配置。选填
        enable: true # 是否开启会话保持。必填，布尔值
        sessionExpireTime: 100 # 会话保持的时间。选填，默认值：30，可选值：30~3600，单位：秒。
      healthCheck: # 健康检查相关配置。选填
        enable: true # 是否开启健康检查。必填，布尔值
        checkType: "TCP" # 健康检查类型。选填，枚举值：TCP|HTTP|CUSTOM（仅适用于TCP/UDP监听器，其中UDP监听器只支持CUSTOM；如果使用自定义健康检查功能，则必传）。
        checkPort: 80 # 健康检查端口，选填。默认为后端服务的端口，除非您希望指定特定端口，否则建议留空。（仅适用于TCP/UDP监听器）。
        intervalTime: 10 # 健康检查探测间隔时间。选填，默认值：5，可选值：5~300，单位：秒。
        healthNum: 2 # 健康阈值，表示当连续探测几次健康则表示该转发正常。选填，默认值：3，可选值：2~10，单位：次。
        unHealthNum: 3 # 不健康阈值，表示当连续探测几次健康则表示该转发异常。选填，默认值：3，可选值：2~10，单位：次。
        timeout: 5 # 健康检查的响应超时时间，响应超时时间要小于检查间隔时间。选填，默认值：2，可选值：2~60，单位：秒。
        httpCode: 31 # 健康检查状态码，选填，默认值：31，可选值：1~31。仅适用于HTTP/HTTPS转发规则、TCP监听器的HTTP健康检查方式。 1 表示探测后返回值 1xx 代表健康，2 表示返回 2xx 代表健康，4 表示返回 3xx 代表健康，8 表示返回 4xx 代表健康，16 表示返回 5xx 代表健康。若希望多种返回码都可代表健康，则将相应的值相加。
        httpCheckPath: "/" # 健康检查路径，选填。仅适用于HTTP/HTTPS转发规则、TCP监听器的HTTP健康检查方式。
        httpCheckDomain: "example.com" # 健康检查域名，选填，不能为空值。默认为七层规则域名（仅适用于HTTP/HTTPS转发规则、TCP监听器的HTTP健康检查方式）。
        httpCheckMethod: "HEAD" # 健康检查方法（仅适用于HTTP/HTTPS转发规则、TCP监听器的HTTP健康检查方式），默认值：HEAD，可选值HEAD或GET。
        httpVersion: "HTTP/1.1" # 自定义探测相关参数。健康检查协议CheckType的值取HTTP时，必传此字段，代表后端服务的HTTP版本：HTTP/1.0、HTTP/1.1；（仅适用于TCP监听器）。
        sourceIpType: 0 # 健康检查探测来源。0(VIP为源IP) 1(100.64为源IP)。对于域名化clb默认值为1且只能为1，对于非域名化的clb默认值不一定，可在clb控制台配置页面看能否看到VIP探测方式，如能看到默认值为0，否则为1，更多详情查看 https://cloud.tencent.com/document/product/214/86666
      scheduler: WRR # 请求转发方式配置。WRR、LEAST_CONN 分别表示按权重轮询、最小连接数。选填，枚举值：WRR|LEAST_CONN。
      proxyProtocol:
        enable: false # 启用 ProxyProtocol，默认关闭。
  l7Listeners:
    - protocol: HTTP
      port: 80
      snatEnable: false # 监听器透传客户端源 IP（非 snat 白名单用户，请勿声明该字段）。当 snatEnable 为 true 时，关闭透传客户端源 IP 选项。当 snatEnable 为 false 时，打开透传客户端源 IP 选项。当设置 keepaliveEnable 为 1 时，snatEnable 不能为 false。
      domains:
        - domain: "" # domain为空表示使用VIP作为域名
          rules:
            - url: "/health"
              forwardType: HTTP # 指定后端协议为 HTTP，目前支持 HTTP/HTTPS/GRPC。
              healthCheck:
                enable: false
    - protocol: HTTPS
      port: 443
      defaultServer: "sample.tencent.com" # 默认域名
      keepaliveEnable: 1 # 监听器开启长连接（非 keepalive 白名单用户，请勿声明该字段）
      domains:
        - domain: "sample.tencent.com"
          http2: true # 启用 HTTP 2.0
          rules:
            - url: "/"
              forwardType: HTTPS # 指定后端协议为 HTTPS，目前支持 HTTP/HTTPS/GRPC。
              session:
                enable: true
                sessionExpireTime: 3600
              healthCheck:
                enable: true
                intervalTime: 10 # intervalTime 要大于 timeout，否则会出错
                timeout: 5 # timeout 要小于 intervalTime，否则会出错
                healthNum: 2
                unHealthNum: 2
                httpCheckPath: "/checkHealth"
                httpCheckDomain: "sample.tencent.com" #注意：健康检查必须使用固定域名进行探测，如果您在.spec.loadBalancer.l7Listeners.protocol.domains.domain 里填写的是泛域名，一定要使用 httpCheckDomain 字段明确具体需要健康检查的域名，否则泛域名不支持健康检查。
                httpCheckMethod: HEAD
                httpCode: 31 # 可选值：1~31，默认 31。 1 表示探测后返回值 1xx 代表健康，2 表示返回 2xx 代表健康，4 表示返回 3xx 代表健康，8 表示返回 4xx 代表健康，16 表示返回 5xx 代表健康。若希望多种返回码都可代表健康，则将相应的值相加。
                sourceIpType: 0 # 可选值：0或1，设定健康检查源ip。0 表示负载均衡VIP，1 表示 100.64.0.0/10 网段ip。对于域名化clb默认值为1且只能为1，对于非域名化的clb默认值不一定，可在clb控制台配置页面看能否看到VIP探测方式，如能看到默认值为0，否则为1，更多详情查看 https://cloud.tencent.com/document/product/214/86666。
                checkType: "HTTPS" # 可选值：HTTP，HTTPS，TCP 或 GRPC，默认 HTTP。2024.06之后新建的集群支持改字段，存量集群如有需要可提工单升级后台组件来支持。当 forwardType 为 HTTPS 时，checkType 只能为 TCP 或 HTTPS。当 forwardType 为 GRPC 时，checkType 只能为 TCP 或 GRPC。
              scheduler: WRR # 可选值：WRR、LEAST_CONN、IP_HASH

HorizontalPodAutoscaler:
  annotations: {}
  labels: {}
  # name fullname 功能一致，但 fullnane 会覆盖 name
  # 优先级 fullname > name
  name: hpv-name
  namespace: string

  behavior:
    scaleDown:
      policies:
        - periodSeconds: 11
          type: string
          value: 11
      selectPolicy: string
      # 可用值范围 0 - 3600 秒
      stabilizationWindowSeconds: 600
      tolerance: 1Gi
    scaleUp:
      policies:
        - periodSeconds: 22
          type: string
          value: 22
      selectPolicy: string
      # 可用值范围 0 - 3600 秒
      stabilizationWindowSeconds: 11
      tolerance: 110Mi
  maxReplicas: 2
  metrics:
    - containerResource:
        container: string
        name: string
        target:
          averageUtilization: 1
          averageValue: 100Mi
          type: Utilization # Utilization | Value | AverageValue
          value: 100Mi
      external:
        metric:
          name: string
          selector:
            matchExpressions: []
            matchLabels: {}
        target:
          averageUtilization: 2
          averageValue: 200Mi
          type: Value # Utilization | Value | AverageValue
          value: 200Mi
      object:
        describedObject:
          apiVersion: string
          kind: string
          name: string
        metric:
          name: string
          selector:
            matchExpressions: []
            matchLabels: {}
        target:
          averageUtilization: 3
          averageValue: 300Mi
          type: AverageValue # Utilization | Value | AverageValue
          value: 300Mi
      pods:
        metric:
          name: string
          selector:
            matchExpressions: []
            matchLabels: {}
        target:
          averageUtilization: 4
          averageValue: 400Mi
          type: Utilization # Utilization | Value | AverageValue
          value: 400Mi
      resource:
        name: string
        target:
          averageUtilization: 5
          averageValue: 500Mi
          type: Value # Utilization | Value | AverageValue
          value: 500Mi
      type: string # ContainerResource | External | Object | Pods | Resource
  minReplicas: 2
  scaleTargetRef:
    apiVersion: string
    kind: string
    name: string

VerticalPodAutoscaler:
  annotations: {}
  labels: {}
  # name fullname 功能一致，但 fullnane 会覆盖 name
  # 优先级 fullname > name
  name: string
  fullname: string-name
  namespace: string-aaa
  # format: []string
  recommenders:
    - aaaaaaa
    # - name: string
  resourcePolicy:
    containerPolicies:
      - containerName: string
        # format: []string
        controlledResources:
          - cpu
          - memory
          # - items: string
        controlledValues: RequestsOnly # RequestsAndLimits | RequestsOnly
        # maxAllowed 和 minAllowed 中的值应该符合 Quantity
        # 支持 cpu、memory 两个属性
        maxAllowed: {}
        minAllowed: {}
        mode: Auto # Auto | Off
        oomBumpUpRatio: 100Mi
        oomMinBumpUp: 200Mi
  targetRef:
    apiVersion: string
    kind: string
    name: string
  updatePolicy:
    # 这里将 items 中的子项提升
    evictionRequirements:
      - changeRequirement: TargetLowerThanRequests # TargetHigherThanRequests | TargetLowerThanRequests
        # format: []string
        # 这里猜测的可用值 cpu memory
        resources:
          - cpu
          - memory
          # - items: string # cpu | memeory
      # # CRD 中的默认定义，参考
      # - items:
      #     changeRequirement: string # TargetHigherThanRequests | TargetLowerThanRequests
      #     # format: []string
      #     resources: []
      #       # - items: string
    minReplicas: 2
    updateMode: Recreate # Off | Initial | Recreate | InPlaceOrRecreate | Auto
